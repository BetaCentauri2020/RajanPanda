!function(t){var i={bgColor:"#ccc",fgColor:"",size:160,donutwidth:40,textsize:16},s={init:function(e){var n=!0;if("object"==typeof e?(this.donutchartsettings=t.extend({},i,e),e.size&&!e.donutwidth&&(this.donutchartsettings.donutwidth=e.size/4),e.size&&!e.textsize&&(this.donutchartsettings.textsize=e.size/10)):"object"==typeof this.donutchartsettings?n=!1:this.donutchartsettings=i,n){t(this).css("position","relative"),t(this).css("width",this.donutchartsettings.size+"px"),t(this).css("height",this.donutchartsettings.size+"px"),t(this).html("<canvas width='"+this.donutchartsettings.size+"' height='"+this.donutchartsettings.size+"'></canvas><div style='position:absolute;top:0;left:0;line-height:"+this.donutchartsettings.size+"px;text-align:center;width:"+this.donutchartsettings.size+"px;font-size:"+this.donutchartsettings.textsize+"px;'>"+t(this).html()+"<span></span></div>");var h=t("canvas",this).get(0);"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(h);var a=h.getContext("2d");s.drawBg.call(a,this.donutchartsettings)}},drawBg:function(t){this.clearRect(0,0,t.size,t.size),this.beginPath(),this.fillStyle=t.bgColor,this.arc(t.size/2,t.size/2,t.size/2,0,2*Math.PI,!1),this.arc(t.size/2,t.size/2,t.size/2-t.donutwidth,0,2*Math.PI,!0),this.fill()},drawFg:function(t,i){var s=i/100*360,e=-90*Math.PI/180,n=Math.PI*(-90+s)/180;this.beginPath(),this.fillStyle=t.fgColor,this.arc(t.size/2,t.size/2,t.size/2,e,n,!1),this.arc(t.size/2,t.size/2,t.size/2-t.donutwidth,n,e,!0),this.fill()}};t.fn.donutchart=function(i){return this.each(function(){if(s.init.call(this,i),"animate"==i){var e=t(this).attr("data-percent"),n=t(this).children("canvas").get(0),h=t(this).find("span"),a=this.donutchartsettings;if(n.getContext){var o=n.getContext("2d"),r=0;var c=setInterval(function(){r++,s.drawBg.call(o,a),s.drawFg.apply(o,[a,r]),h.text(r+"%"),r>=e&&clearInterval(c)},20)}}})}}(jQuery);
